<h2>ヘルプ</h2>


<h3>スキンへの記述例</h3>

<p>
	<h4>&lt;%TrackBack(list)%&gt;</h4>
</p>
<p>
	受け取ったトラックバックの一覧を表示します。<br />
	また、 <strong>&lt;%TrackBack(list,12)%&gt;</strong>のようにパラメータの2つめに記事idをつけると、その記事idにpingされたトラックバックの一覧を埋め込むことも可能です。<br />一覧表示のデザイン(テンプレート)は、プラグインのオプション(編集)画面にてカスタマイズできます。</p>

<p>
	<h4>&lt;%TrackBack(list)%&gt;</h4>
</p>
<p>
	受け取ったトラックバックの一覧を表示します。<br />
	また、 <strong>&lt;%TrackBack(list,12)%&gt;</strong>のようにパラメータの2つめに記事idをつけると、その記事idにpingされたトラックバックの一覧を埋め込むことも可能です。<br />一覧表示のデザイン(テンプレート)は、プラグインのオプション(編集)画面にてカスタマイズできます。
</p>
<p>
	デフォルトではすべてのトラックバックが表示されるようになっていますが、多数のトラックバックがあるような場合には最新のものだけを表示して、残りの部分を折りたたむことができます。<br />
<br />
・最新の5件だけを表示して、あとは折りたたむ場合<br />
<strong>&lt;%TrackBack(list, limit5)%&gt;</strong><br />
<br />
・1.x系と同じようにすべてのトラックバックを展開する場合（デフォルト）<br />
<strong>&lt;%TrackBack(list, limit-1)%&gt;</strong><br />
<br />
・すべてのトラックバックを折りたたんだ状態にする場合<br />
<strong>&lt;%TrackBack(list, limit0)%&gt;</strong><br />
</p>
<p>
	記事idの指定とと折りたたみを同時に使う場合には<strong>&lt;%TrackBack(list,<em>記事id</em>,<em>limit0</em>)%&gt;</strong>のように指定します。
</p>

<p>
	<h4>&lt;%TrackBack(form)%&gt;</h4>
</p>
<p>
	手動でトラックバックを受け付ける入力フォームページへのリンクurlを表示します。<br />
	リンク先ページで相手側にトラックバック送信機能がない場合でも記事要約とurlを受け付けることができるようになります。<br /><br />
	<blockquote>便利な使い方としては、このプラグインのオプション(編集)画面にてトラックバック表示専用テンプレートの「フッタ」の所に、
	<pre>この記事への手動トラックバックは
&lt;a href='&lt;%form%&gt;' onclick='window.open(this.href, 
"trackback", "scrollbars=yes,width=600,height=340,left=10,top=10,status=yes,resizable=yes");
 return false;'&gt;こちらのフォーム&lt;/a&gt;からどうぞ。
</pre>
 と書き足しておくと、上記<strong>&lt;%TrackBack(list)%&gt;</strong>を書いた箇所に自動的にこの手動pingフォームへのリンクが表示され、手動pingフォームがポップアップするようにできます。<br />
 もちろん、テンプレートに<strong>&lt;%form%&gt;</strong>を埋め込まずに、スキンの別の場所に個別に&lt;a href='&lt;%TrackBack(form)%&gt;&lt;/a&gt;と書いても(書かなくても)結構です。</blockquote>
 
</p>

<p>
	<h4>&lt;%TrackBack(url)%&gt;</h4>
</p>
<p>
	いわゆるトラックバックURL(相手側から見たping先)を表示します。<br />
	また、このプラグインのオプション(編集)画面にて設定できるトラックバック表示専用テンプレート内には<strong>&lt;%action%&gt;</strong>と書き込むと、トラックバックurlに変換されます。<br />
	<blockquote>例えば、トラックバック表示専用テンプレートの「フッタ」の所に、
		<pre>この記事へのトラックバックurl:&lt;a href='&lt;%action%&gt;'&gt;&lt;%action%&gt;&lt;/a&gt;
(右クリックでショートカットのコピーをご利用ください)
</pre>
	と書いておけば、個別に<strong>&lt;%TrackBack(url)%&gt;</strong>をスキンに書き込まなくても<strong>&lt;%TrackBack(list)%&gt;</strong>を書いた場所に表示されます。</blockquote>
</p>


<p>
	<h4>&lt;%if(TrackBack,<em>key</em>,<em>value</em>)%&gt; (v3.3より)</h4>
</p>
<p>
	if拡張(&lt;%if()%&gt;)に対応しています。<br />
	トラックバックを受け付けている場合や、バックリンクチェックが有効になっている場合のみに特定の表示をさせることができるようになります。<br />
	<br />
	
	<ul>
		<li><em>key</em>(チェックの種類を指定します)</li>
		<li>　<b>accept</b>　トラックバックを受け付けているかどうか（デフォルト）</li>
		<li>　<b>required</b>　バックリンクチェックが有効かどうか</li>
	</ul>
	<ul>
		<li><em>value</em>(判定結果を指定します)</li>
		<li>　<b>yes</b>　チェックの内容が真の場合、真であると判断します（デフォルト）</li>
		<li>　<b>no</b>　チェックの内容が真の場合、偽であると判断します</li>
	</ul>
	
	<br />
	例1）&lt;%if(TrackBack)%&gt;この部分はトラックバックを受け付けている時のみ表示されます&lt;%endif%&gt;<br />
	例2）&lt;%if(TrackBack,accept,no)%&gt;この部分はトラックバックを受け付けていない時のみ表示されます&lt;%endif%&gt;<br />
</p>
	
<h3>テンプレート内の記述例</h3>

<p>
	※上記のスキン記述例はすべてテンプレート内でも使用できます。
</p>

<p>
	<h4>&lt;%TrackBack(count)%&gt;</h4>
</p>
<p>
	記事ごとの何件トラックバック件数を表示します。<br />
	デフォルトでは"No Trackbacks", 
	"1 Trackback", "2 Trackbacks",のように表示されます。<br />
	プラグインのオプション(編集)画面にて設定してください。
</p>


<h3>表示のカスタマイズ</h3>

<p>
	トラックバック関連の表示方法はテンプレートを編集することによってカスタマイズできますが、色や余白などのデザインはCSS側で指定する必要があります。テンプレート内に入力したクラス名のプロパティはcssで指定してください。デフォルトのテンプレートを飾るCSSプロパティの例をあげておきます。
</p>

<pre>div.tb {
	border: 1px solid #000; background: #FFF;
}
div.tb div.head {
	padding: 4px;
	background: #000; color: #FFF;
	font-weight: bold; text-transform: lowercase; letter-spacing: 0.6em;
}
div.tb div.empty {
	padding: 4px;
	font-size: 95%;
}
div.tb div.item {
	padding: 4px;
}
div.tb div.item div.name {
	margin-bottom: 8px;
	font-size: 120%; font-weight: bold;
}
div.tb div.item div.body {
	font-size: 95%;
}
div.tb div.item div.body a {
	font-weight: bold;
}
div.tb div.item div.date {
	margin-bottom: 8px;
	color: #888;
	font-size: 85%; text-align: right;
}
div.tb div.info {
	padding: 4px;
	color: #FFF; background: #888;
	font-size: 85%; font-style: italic;
}</pre>

<h3>日本語版更新履歴</h3>

<ul>
	<li>Version 2.0.3jp10 : (2007/06/30)</li>
	<li>　[Fixed] mysql_query()をsql_query()に変更</li>
	<li>　[Changed] 実体参照テーブルについてNucleus標準ものを使うようにした</li>
	<li>　[Changed] インストールできるバージョンを3.3以降した</li>
	<li>　[Changed] Ricoを2.0にアップデートしたのに伴い、管理画面の機能を増強</li>
	<li>　[Added] コメント部分でもテンプレート変数が使えるようにした</li>
	<li>　[Fixed] トラックバック送信部分の不具合を修正(FC2対策)</li>
	<li>　[Changed] UserAgentをオリジナル版にあわせて変更</li>
	<li>　[Changed] TrackBackのレスポンスの解析にXMLパーサーを使うようにした</li>
	<li>　[Fixed] 言及リンクチェックの不具合を修正</li>
		
	<li>Version 2.0.3jp9 : (2007/05/04)</li>
	<li>　[Added] doIf()を追加(Nucleus 3.3向け)</li>
	<li>　[Added] URLが無効なトラックバックを無視するようにした</li>
	
	<li>Version 2.0.3jp8 : (2007/03/18)</li>
	<li>　[Fixed] 管理画面でStoryのリンクの不具合を修正</li>
	<li>　[Changed] URL抽出ルーチンを改良</li>
	<li>　[Changed] 管理画面へのリンクを修正</li>
	<li>　[Changed] 管理画面のページングをAjax対応にした</li>
	<li>　[Changed] トラックバック通知アドレスをブログごとに設定できるようにした</li>
	<li>　[Fixed] phpのshort openタグを修正</li>
	<li>　[Fixed] 管理画面のトラックバック一覧で日付が正常に表示されない問題を修正</li>
	
	<li>Version 2.0.3jp7 : (2006/11/26)</li>
	<li>　[Changed] SpamChekについて微調整</li>
	<li>　[Added] Ticket処理を追加(CSRF対策)</li>
	<li>　[Fixed] URLに&amp;が入っているときの動作を変更</li>
	<li>　[Added] 管理画面にアイコンを追加</li>
	
	<li>Version 2.0.3jp6 : (2006/09/30)</li>
	<li>　[Fixed] セキュリティの向上</li>
	
	<li>Version 2.0.3jp5 : (2006/09/16)</li>
	<li>　[Fixed] getPermaLinksFromText()内のURL抽出ルーチンの不具合を修正</li>
	<li>　[Fixed] Auto-Discovery時にSQLエラーが出る不具合を修正</li>
	<li>　[Fixed] 管理画面でパースエラーが出る場合がある不具合を修正</li>
	<li>　[Changed] SQLのクォートを"から'に変更</li>
	<li>　[Fixed] mb_emulator環境にてエラーが出る問題を修正</li>
	<li>　[Fixed] curlが有効な環境でエラーが出る問題を修正</li>
	
	<li>Version 2.0.3jp4 : (2006/07/15)</li>
	<li>　[Added] AutoDiscoveryURL出力時にSpamCheckを行うようにした</li>
	<li>　[Added] メッセージ、デフォルト値を日本語化</li>
	<li>　[Added] 大手ASPの言及トラックバックチェックの際にURLのリダイレクトを解除するようにした</li>
</ul>